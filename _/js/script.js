var Canvas=function(){"use strict";var a,b=!1,c=[],d="12px serif",e="#000000",f=1,g=[],h=function(d,e,f,g){"undefined"==typeof d&&(d=document.getElementsByTagName("body")[0]),"undefined"==typeof e&&(e=window.innerWidth),"undefined"==typeof f&&(f=window.innerHeight),a=document.createElement("canvas"),a.setAttribute("width",e),a.setAttribute("height",f),a.setAttribute("style","z-index:"+(c.length+1)),d.appendChild(a);var h=c.length;return c.push(a.getContext("2d")),b=!0,"function"==typeof g&&g(h),h},i=function(a,b,d,f,g){"undefined"==typeof g&&(g=e),c[a].fillStyle=g,c[a].beginPath(),c[a].arc(b,d,f,0,2*Math.PI,!0),c[a].closePath(),c[a].fill()},j=function(a,b,d,f,g,h,i,j){"undefined"==typeof j&&(j=e),c[a].beginPath(),c[a].strokeStyle=j,c[a].arc(b,d,f,g,h,i),c[a].stroke()},k=function(a,b,d,f,g,h,i,j){"undefined"==typeof j&&(j=e),c[a].beginPath(),c[a].strokeStyle=j,c[a].moveTo(b,d),c[a].quadraticCurveTo(f,g,h,i),c[a].stroke()},l=function(a,b,d,f,g,h,i,j,k,l){"undefined"==typeof l&&(l=e),c[a].beginPath(),c[a].strokeStyle=l,c[a].moveTo(b,d),c[a].bezierCurveTo(f,g,h,i,j,k),c[a].stroke()},m=function(a,b,e,f,g,h){"undefined"==typeof h&&(h=d),"undefined"==typeof g&&(g="fill"),c[a].font=h,"fill"==g?c[a].fillText(f,b,e):c[a].strokeText(f,b,e)},n=function(a,b,d,g,h,i,j){"undefined"==typeof i&&(i=e),"undefined"==typeof j&&(j=f),c[a].beginPath(),c[a].moveTo(b,d),c[a].lineTo(g,h),c[a].lineWidth=j,c[a].strokeStyle=i,c[a].stroke(),c[a].closePath()},o=function(a,b,d,e,f,g,h,i,j){switch("undefined"==typeof h&&(h="stroke"),h){case"fill":c[a].fillStyle=g,"undefined"!=typeof j&&(c[a].globalAlpha=j),c[a].fillRect(b,d,e,f);break;case"stroke":c[a].strokeStyle=g,c[a].strokeRect(b,d,e,f);break;default:c[a].fillStyle=i,"undefined"!=typeof j&&(c[a].globalAlpha=j),c[a].fillRect(b,d,e,f),c[a].strokeStyle=g,c[a].strokeRect(b,d,e,f)}},p=function(a,b){return q(a),c[a].save(),"undefined"==typeof b.img?(s("image not set"),!1):("undefined"!=typeof b.sWidth?c[a].drawImage(b.img,b.sx,b.sy,b.sWidth,b.sHeight,b.dx,b.dy,b.dWidth,b.dHeight):"undefined"!=typeof b.dWidth?c[a].drawImage(b.img,b.dx,b.dy,b.dWidth,b.dHeight):c[a].drawImage(b.img,b.dx,b.dy),c[a].restore(),!0)},q=function(b,d){"undefined"==typeof d||d?c[b].clearRect(0,0,a.width,a.height):(c[b].save(),c[b].setTransform(1,0,0,1,0,0),c[b].clearRect(0,0,a.width,a.height),c[b].restore())},r=function(b,d){switch(d){case"canvas":d=a;break;case"ctx":d=c[b]}return d},s=function(a){g.push("Error: "+a)},t=function(){if(g.length>0)for(var a=g.length,b=0;a>b;b++)console.log(g[b])};return{init:h,circle:i,arc:j,qArc:k,bArc:l,text:m,line:n,image:p,rectangle:o,clear:q,get:r,has_error:t}}(),Collision={checkCollision:function(a,b){for(var c=new Array(a.x-a.negXcollisionBox,a.x+a.posXcollisionBox),d=new Array(a.y-a.negYcollisionBox,a.y+a.posYcollisionBox),e=0;2>e;e++)for(var f=0;2>f;f++)if(c[e]>b.x-b.negXcollisionBox&&c[e]<b.x+b.posXcollisionBox&&d[f]>b.y-b.negYcollisionBox&&d[f]<b.y+b.posYcollisionBox)return!0;return!1},checkCollisionCoords:function(a,b,c,d,e){new Array(a-e,a+e),new Array(d-e,d+e);return a>c-e&&c+e>a&&b>d-e&&d+e>b},inside:function(a,b){for(var c=a[0],d=a[1],e=!1,f=0,g=b.length-1;f<b.length;g=f++){var h=b[f][0],i=b[f][1],j=b[g][0],k=b[g][1],l=i>d!=k>d&&(j-h)*(d-i)/(k-i)+h>c;l&&(e=!e)}return e}},Color={componentToHex:function(a){var b=a.toString(16);return 1==b.length?"0"+b:b},rgbToHex:function(a,b,c){return"#"+this.componentToHex(a)+this.componentToHex(b)+this.componentToHex(c)}},Draw=function(){"use strict";var a=function(a,b,c,d,e){for(var f=b/(10*d),g=1;b>g;g+=f)$w.canvas.line(a,g,0,g,c,"#dedede");for(var h=1;c>h;h+=f)$w.canvas.line(a,0,h,b,h,"#dedede");$w.canvas.line(a,0,b/2,b,c/2,"#000000",2),$w.canvas.line(a,c/2,0,b/2,c,"#000000",2),"function"==typeof e&&e()};return{grid:a}}();Math.radians=function(a){return a*Math.PI/180},Math.degrees=function(a){return 180*a/Math.PI},Math.sqr=function(a){return a*a},Math.dist=function(a,b,c,d){return Math.hypot(c-a,d-b)};var Motion={distance_to_point:function(a,b,c,d){return Math.hypot(c-a,d-b)},point_direction:function(a,b,c,d,e){var f=c-a,g=d-b,h=Math.atan2(g,f),i=h*(180/Math.PI);return 0>i&&(i+=360),e?h:i},motion_set:function(a,b,c,d){var e=c*(Math.PI/180);return a+=Math.cos(e)*Math.PI/180*d,b+=Math.sin(e)*Math.PI/180*d,[a,b]},motion_set_2:function(a,b){var c=a.position.x,d=a.position.y,e=a.rotation.z;return c+=Math.cos(e)*Math.PI/180*b,d+=Math.sin(e)*Math.PI/180*b,a.position.x=c,a.position.y=d,a},move_to_contact:function(a,b,c,d,e){var f=new Object,g=d*(Math.PI/180);return a+=Math.cos(g)*Math.PI/180*e,b+=Math.sin(g)*Math.PI/180*e,c+=Math.sin(g)*Math.PI/180*e,f.x=a,f.y=b,f.z=c,f},move_to_contact_2:function(a,b){var c=this.point_direction(a.x,a.y,b.x,b.y);c+=180;var d=15;for(a.speed>1?d=a.speed:b.speed>1&&(d=b.speed);1==this.checkCollision(a,b);){var e=c*(Math.PI/180);a.x+=Math.cos(e)*Math.PI/180*a.speed,a.y+=Math.sin(e)*Math.PI/180*a.speed}}},Mouse={mouseX:0,mouseY:0,trackMouse:function(a,b){a.addEventListener("mousemove",function(a){this.mouseX=a.clientX,this.mouseY=a.clientY,b({x:a.clientX,y:a.clientY})})}},_3D={makeA3DPoint:function(a,b,c){var d=new Object;return d.x=a,d.y=b,d.z=c,d},convertPointIn3DToPointIn2D:function(a){var b=new Object,c=focalLength/(focalLength+a.z);return b.x=a.x*c,b.y=a.y*c,b}},WesMantooth=function(){this.canvas=Canvas,this._3D=_3D,this.motion=Motion,this.collision=Collision,this.mouse=Mouse,this.draw=Draw,this.color=Color,this.boolLog=!0,this.log=function(a){this.boolLog&&void 0!==window.console&&console.log(a)}},$w=new WesMantooth;